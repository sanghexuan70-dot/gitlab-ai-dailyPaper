# GitLab â†’ AI â†’ é’‰é’‰è‡ªåŠ¨åŒ–æ—¥æŠ¥ç³»ç»Ÿ

è‡ªåŠ¨ä»Ž GitLab èŽ·å–ä»Šæ—¥æäº¤è®°å½•,é€šè¿‡ AI ç”Ÿæˆå·¥ä½œæ—¥æŠ¥,å¹¶å‘é€åˆ°é’‰é’‰ç¾¤æœºå™¨äººã€‚

```bash
nodeç‰ˆæœ¬ > 14 < 22 æŽ¨è16 18ç‰ˆæœ¬
å¦‚æžœç¬¬ä¸€æ¬¡ä¸‹è½½nodeéœ€é…ç½®çŽ¯å¢ƒå˜é‡
```

```bash
npm install
```

### 1. å¤åˆ¶é…ç½®æ–‡ä»¶

```bash
ç”Ÿæˆé…ç½®æ–‡ä»¶ç¤ºä¾‹
cp .env.example .env
```

### 2. ç¼–è¾‘ `.env` æ–‡ä»¶

```bash
1.GitLabé…ç½®
GITLAB_URL å…¬å¸çš„gitlabåœ°å€
GITLAB_TOKEN gitlabè´¦å·çš„ Access Tokens è®°ä½è¦å‹¾é€‰ api, read_api, read_repository
```

![é…ç½®ç¤ºæ„](./images/gitlab_token.png)

```
GITLAB_PROJECT_IDS ä½ ç»å¸¸æäº¤çš„gitlabé¡¹ç›®id å¤šä¸ªç”¨é€—å·,éš”å¼€
```

![é…ç½®ç¤ºæ„](./images/gitlab_project_ids.png)

```
GITLAB_AUTHOR_USERNAME é¡¹ç›®æäº¤è®°å½•ä¸­
```

![é…ç½®ç¤ºæ„](./images/username.png)

```

2.AIé…ç½®
ä¸ªäººå»ºè®®åŽ»ç”³è¯·zhipuçš„apikeyæ˜¯å…è´¹çš„ æ¨¡åž‹(glm-4-flash)

----------------------------------------------------------------------------------------------------------------------------------
(3.é’‰é’‰é…ç½® å¦‚æžœæ²¡æœ‰æŠŠæ—¥æŠ¥å‘é€è‡³ç¾¤å†…çš„æƒ³æ³• æ­¤æ­¥éª¤å¯ä»¥è·³è¿‡)
(4.æŠ¥å‘Šé…ç½® åŒç† å¦‚åªéœ€æ—¥æŠ¥å†…å®¹éƒ¨åˆ† ä¸éœ€è¦åç§°éƒ¨é—¨ ä¹Ÿå¯è·³è¿‡)

3.é’‰é’‰é…ç½®
DINGTALK_WEBHOOK ç¾¤å†…æœºå™¨äººçš„webhook
```

![é…ç½®ç¤ºæ„](./images/webhook.png)

```
DINGTALK_SECRET ç¾¤å†…æœºå™¨äººçš„å®‰å…¨è®¾ç½®é€‰æ‹©åŠ ç­¾ç”Ÿæˆçš„å¯†é’¥
```

![é…ç½®ç¤ºæ„](./images/dingtaik.png)

```
å½“ä½ ä¸ºé’‰é’‰ç¾¤ç®¡ç†æˆ–è€…ç¾¤ä¸»æ—¶ æ­é…ç¾¤åŠ©æ‰‹çš„è‡ªåŠ¨åŒ–åŠŸèƒ½ å¯å®žçŽ°æœºå™¨äººè¾“å‡ºæ—¥æŠ¥ä¿¡æ¯åŽ ç¾¤åŠ©æ‰‹è‡ªåŠ¨å›žå¤æ—¥æŠ¥å¡«å†™é“¾æŽ¥ ä»Žè€Œå¤åˆ¶æ—¥æŠ¥ç›´æŽ¥è¿›å…¥é“¾æŽ¥å¡«å†™
é’‰é’‰æ—¥æŠ¥å¡«å†™åœ°å€ï¼šhttps://report.dingtalk.com/alid/app/reportpc/createreport.html?corpid=dingc0ef3bb242815cd035c2f4657eb6378f&comeFromInside=1&templateId=15dcb324549d958d99832164887913dc&sourcefrom=immsg
```

![é…ç½®ç¤ºæ„](./images/cicd1.png)

```

```

![é…ç½®ç¤ºæ„](./images/cicd2.png)

```

4.æŠ¥å‘Šé…ç½®
REPORT_AUTHOR åå­—
REPORT_TEAM é¡¹ç›®ç»„å
```

# å‘é€æ—¥æŠ¥åˆ°é’‰é’‰æœºå™¨äºº

# è¾“å‡ºæ—¥æŠ¥å†…å®¹ æ‰“å¼€é’‰é’‰æ—¥æŠ¥å¡«å†™é¡µé¢ å¤åˆ¶å†…å®¹è¿›è¡Œä¸ªæ€§åŒ–å¡«å†™

npm start

# æœ¬åœ°è¿è¡Œ (ä»…æ‰“å°,ä¸å‘é€è‡³é’‰é’‰æœºå™¨äºº)

# è¾“å‡ºæ—¥æŠ¥å†…å®¹ æ‰“å¼€é’‰é’‰æ—¥æŠ¥å¡«å†™é¡µé¢ å¤åˆ¶å†…å®¹è¿›è¡Œä¸ªæ€§åŒ–å¡«å†™

npm test

# æˆ–

node index.js --dry-run

### é’‰é’‰æ¶ˆæ¯æ ¼å¼

```
ðŸ“… 2026-01-08 å·¥ä½œæ—¥æŠ¥

å§“å: å¼ ä¸‰
éƒ¨é—¨: æŠ€æœ¯éƒ¨

---

ä»Šæ—¥å·¥ä½œå†…å®¹:
1.ã€ä¿®å¤ã€‘ä¿®å¤åˆæˆæ°¨æ¨¡å—ä¸­ InputNumber ç»„ä»¶å¯è¾“å…¥å¤šä¸ªå‰å¯¼ 0 çš„é—®é¢˜,ä¼˜åŒ–æ•°å€¼è¾“å…¥ä½“éªŒã€‚
2.ã€æ–°å¢žã€‘å®Œæˆè¡¨å•å­—æ®µåœ¨ä¸åŒæ¨¡å¼ä¸‹çš„åŠ¨æ€å±•ç¤ºé€»è¾‘è°ƒæ•´ã€‚
3.ã€ä¼˜åŒ–ã€‘é‡æž„è¡¨å•é…ç½®ä»£ç ,æå‡å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚

---

ðŸ¤– æœ¬æ—¥æŠ¥ç”± AI è‡ªåŠ¨ç”Ÿæˆ
```

## ðŸ”§ é«˜çº§é…ç½®

### å¤šäººä½¿ç”¨

ä¸ºæ¯ä¸ªäººåˆ›å»ºç‹¬ç«‹çš„ `.env` æ–‡ä»¶:

```bash
cp .env.example .env.zhangsan
cp .env.example .env.lisi
```

ä¿®æ”¹å„è‡ªçš„é…ç½®:

```bash
# zhangsan
GITLAB_AUTHOR_USERNAME=zhangsan
REPORT_AUTHOR=å¼ ä¸‰

# lisi
GITLAB_AUTHOR_USERNAME=lisi
REPORT_AUTHOR=æŽå››
```

æ‰§è¡Œæ—¶æŒ‡å®šé…ç½®æ–‡ä»¶:

```bash
# ä½¿ç”¨ä¸åŒçš„çŽ¯å¢ƒå˜é‡æ–‡ä»¶
DOTENV_CONFIG_PATH=.env.zhangsan node index.js
DOTENV_CONFIG_PATH=.env.lisi node index.js
```

### å¤šé¡¹ç›®ç®¡ç†

```bash
# å¤šä¸ªé¡¹ç›®ç”¨é€—å·åˆ†éš”
GITLAB_PROJECT_IDS=123,456,789
```
